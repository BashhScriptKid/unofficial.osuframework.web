<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Hot Reload | osu!framework </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Hot Reload | osu!framework ">
      
      
      <link rel="icon" href="../assets/nuget icon.png">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ppy/osu-framework.wiki/blob/master/Development-and-Testing.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../assets/docfx_icon.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">

<p>All initial development of (and further improvements applied) to components in a project should be developed in the VisualTests environment. There are several advantages to doing this.</p>
<h1 id="hot-reload">Hot Reload</h1>
<p>Test scenes are integrated with the <a href="https://devblogs.microsoft.com/dotnet/introducing-net-hot-reload/">.NET Hot Reload</a> mechanism. Here is an example of how this looks in practice:</p>
<p><a href="https://github.com/ppy/osu-framework/assets/20418176/a3598d28-5347-45a2-9ef7-43fab5895a83">https://github.com/ppy/osu-framework/assets/20418176/a3598d28-5347-45a2-9ef7-43fab5895a83</a></p>
<p>Keep in mind that the Hot Reload facility is subject to some limitations and some changes will require a full application restart. For more information, see <a href="https://github.com/dotnet/roslyn/blob/2a9938ad11e432fdd274353f57083d4f6f83edf8/docs/wiki/EnC-Supported-Edits.md"><em>Supported Edits in Edit &amp; Continue (EnC)</em></a>.</p>
<h1 id="steps-and-automated-testing">Steps and automated testing</h1>
<p>You can use the <code>AddStep</code> function to add automatic steps which should be performed. Asserts can also be added as steps. These steps can be run in an interactive environment by the user, but also run in a headless execution, allowing for CI process testing.</p>
<p>The types of steps available to be added are as follows:</p>
<ul>
<li><a href="https://github.com/ppy/osu-framework/blob/b4c2a61f7e40d288611d587294a78fbcf68342fd/osu.Framework/Testing/TestScene.cs#L290"><code>AddStep()</code></a> creates a step that runs a method. Completes successfully if no exceptions are caught.</li>
<li><a href="https://github.com/ppy/osu-framework/blob/b4c2a61f7e40d288611d587294a78fbcf68342fd/osu.Framework/Testing/TestScene.cs#L322"><code>AddRepeatStep()</code></a> creates a step that runs a method a specified amount of times. Completes successfully if no exceptions are caught.</li>
<li><a href="https://github.com/ppy/osu-framework/blob/b4c2a61f7e40d288611d587294a78fbcf68342fd/osu.Framework/Testing/TestScene.cs#L330"><code>AddToggleStep()</code></a> toggles a flag.</li>
<li><a href="https://github.com/ppy/osu-framework/blob/b4c2a61f7e40d288611d587294a78fbcf68342fd/osu.Framework/Testing/TestScene.cs#L346"><code>AddWaitStep()</code></a> adds a step that waits a specified amount of time before continuing to the next step.</li>
<li><a href="https://github.com/ppy/osu-framework/blob/b4c2a61f7e40d288611d587294a78fbcf68342fd/osu.Framework/Testing/TestScene.cs#L354"><code>AddSliderStep()</code></a> adds a step that creates a slider-bar that adjusts a set value.</li>
<li><a href="https://github.com/ppy/osu-framework/blob/b4c2a61f7e40d288611d587294a78fbcf68342fd/osu.Framework/Testing/TestScene.cs#L362"><code>AddAssert()</code></a> creates a step that fails if the specified value does not return true.</li>
<li><a href="https://github.com/ppy/osu-framework/blob/b4c2a61f7e40d288611d587294a78fbcf68342fd/osu.Framework/Testing/TestScene.cs#L338"><code>AddUntilStep()</code></a> adds a step that attempts to run until a condition becomes true, or fails when it times out.</li>
</ul>
<p>Both <code>AddAssert()</code> and <code>AddUntilStep()</code> support the <a href="https://docs.nunit.org/articles/nunit/writing-tests/assertions/assertion-models/constraint.html">NUnit assertion constraint model</a>, i.e.:</p>
<pre><code class="lang-csharp">AddAssert(&quot;no text is selected&quot;, () =&gt; textBox.SelectedText, () =&gt; Is.Empty);
</code></pre>
<p>Using this style is highly recommended as the NUnit matchers provide vastly improved debugging output in case of failure compared to just plain true/false assertions.</p>
<h1 id="caveats">Caveats</h1>
<ul>
<li>Hot reload has no effect if the application is started with a debugger attached. Attempting to attach debugger after launching and applying changes via hot reload will fail with error <code>0x80131c69</code> (<code>CORDBG_E_ASSEMBLY_UPDATES_APPLIED</code>).</li>
<li>If the debugger is attached, <code>UntilStep</code>s will never time out. This is a convenience feature to improve debugging of the failing condition in the until step.</li>
</ul>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ppy/osu-framework.wiki/blob/master/Development-and-Testing.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          osu!framework is licensed under the MIT licence, docs powered by docfx
        </div>
      </div>
    </footer>
  </body>
</html>
