<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>Adding your resources library to the Resource Store | osu!framework </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="Adding your resources library to the Resource Store | osu!framework ">
      
      
      <link rel="icon" href="../assets/nuget icon.png">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      <meta name="docfx:docurl" content="https://github.com/ppy/osu-framework.wiki/blob/master/Setting-up-compiled-resource-stores.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../assets/docfx_icon.png" alt="">
            
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled="" placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">
      <div class="toc-offcanvas">
        <div class="offcanvas-md offcanvas-start" tabindex="-1" id="tocOffcanvas" aria-labelledby="tocOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="tocOffcanvasLabel">Table of Contents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#tocOffcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <nav class="toc" id="toc"></nav>
          </div>
        </div>
      </div>

      <div class="content">
        <div class="actionbar">
          <button class="btn btn-lg border-0 d-md-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#tocOffcanvas" aria-controls="tocOffcanvas" aria-expanded="false" aria-label="Show table of contents">
            <i class="bi bi-list"></i>
          </button>

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">

<p>This tutorial assumes you have completed <a href="https://github.com/ppy/osu-framework/wiki/Setting-up-your-first-project">setting up your first project</a>.</p>
<ul>
<li><a href="https://github.com/ppy/osu-framework/wiki/Setting-Up-Compiled-Resource-Stores#adding-your-resources-library-to-the-resource-store">Adding your resources library to the Resource Store</a></li>
<li><a href="https://github.com/ppy/osu-framework/wiki/Setting-Up-Compiled-Resource-Stores#default-resources-structure-and-adding-new-resources">Default resources structure</a>
<ul>
<li><a href="https://github.com/ppy/osu-framework/wiki/Setting-Up-Compiled-Resource-Stores#adding-custom-fonts-to-the-font-store">Adding custom fonts to the font store</a></li>
</ul>
</li>
<li><a href="https://github.com/ppy/osu-framework/wiki/Setting-Up-Compiled-Resource-Stores#accessing-resources-from-the-resource-store">Accessing resources from the resource store</a></li>
</ul>
<h1 id="adding-your-resources-library-to-the-resource-store">Adding your resources library to the Resource Store</h1>
<p>The first time you set up your project, you will need to add a <a href="https://github.com/ppy/osu-framework/blob/master/osu.Framework/IO/Stores/DllResourceStore.cs"><code>DllResourceStore</code></a> with the path to a resources library. This will enable you to load resources from the specified resource library at run-time, which then in turn allows caching to occur in the <a href="https://github.com/ppy/osu-framework/blob/master/osu.Framework/IO/Stores/ResourceStore.cs"><code>ResourceStore</code></a>. A few important resource stores are already created in the base <a href="https://github.com/ppy/osu-framework/blob/master/osu.Framework/Game.cs"><code>Game</code></a> class which all game instances should inherit.</p>
<p>By default, your resources will be compiled into a dll with your project name and copied into your output directory. This is convenient for our purposes, as all we need to do now is add a <code>DllResourceStore</code> to it using <code>Resources.AddStore()</code> in our <code>BackgroundDependencyLoader</code> method inside of our game class.</p>
<pre><code class="lang-csharp">[BackgroundDependencyLoader]
private void load()
{
     Resources.AddStore(new DllResourceStore(@&quot;AwesomeGame.dll&quot;));
}
</code></pre>
<h1 id="default-resources-structure-and-adding-new-resources">Default resources structure and adding new resources</h1>
<p><a href="https://github.com/ppy/osu-framework/blob/master/osu.Framework/Game.cs"><code>Game</code></a> will automatically create the following stores that point to the respective paths for each store:</p>
<ul>
<li><code>/Textures</code> (<code>TextureStore</code>)</li>
<li><code>/Tracks</code> (<code>AudioManager.Tracks</code>)</li>
<li><code>/Samples</code> (<code>AudioManager.Samples</code>)</li>
<li><code>/Shaders</code> (<code>ShaderManager</code>)</li>
<li><code>/Fonts</code> (<code>FontStore</code>)</li>
</ul>
<p>To add to these stores, simply add resources to the respective directories and specify them as <code>EmbeddedResources</code> inside your <code>.csproj</code>.</p>
<p>For example, to include your own Textures folder and all .png files inside of it recursively:</p>
<pre><code class="lang-xml">&lt;ItemGroup&gt;
 &lt;EmbeddedResource Include=&quot;Textures\**\*.png&quot; /&gt;
&lt;/ItemGroup&gt;
</code></pre>
<h2 id="adding-custom-fonts-to-the-font-store">Adding custom fonts to the font store</h2>
<p>osu!framework loads Open Sans into the <a href="https://github.com/ppy/osu-framework/blob/master/osu.Framework/IO/Stores/FontStore.cs"><code>FontStore</code></a> by default. If you find that this is insufficient for your use, you may add your own fonts to the <code>FontStore</code> by adding your own <a href="https://github.com/ppy/osu-framework/blob/master/osu.Framework/IO/Stores/GlyphStore.cs"><code>GlyphStore</code>s</a>. This is preferably done at the initialization of your game within the <code>BackgroundDependencyLoader</code> method inside your game class by invoking the following:</p>
<pre><code class="lang-csharp">Fonts.AddStore(new GlyphStore(Resources, @&quot;Fonts/AwesomeFont&quot;));
</code></pre>
<p>This will cache our hypothetical &quot;AwesomeFont&quot; for use in any <a href="https://github.com/ppy/osu-framework/blob/master/osu.Framework/Graphics/Sprites/SpriteText.cs"><code>SpriteText</code></a>, which can be set using the <code>Font</code> property.</p>
<h1 id="accessing-resources-from-the-resource-store">Accessing resources from the resource store</h1>
<p>After having added your own resources, you can now access them via dependency injection. You will need to specify the type of store you're trying to inject in the method parameters. For example, if I have a texture named <code>awesomeTexture.png</code> inside of my <code>Textures</code> folder, I can load it like this:</p>
<pre><code class="lang-csharp">[BackgroundDependencyLoader]
private void load(TextureStore store)
{
   texture = store.Get(@&quot;awesomeTexture&quot;);
}
</code></pre>
<p>osu!framework will then load the resources for the first time if they have not been cached yet.</p>
<p>To retrieve other resources from other resource stores, simply specify the type of resource store you wish to retrieve from the cache via the load() method's parameters. For example, to retrieve tracks from the audio store, the following code will be sufficient.</p>
<pre><code class="lang-csharp">ITrackStore tracks = null!;

[BackgroundDependencyLoader]
private void load(AudioManager audio)
{
   tracks = audio.Tracks;
}
</code></pre>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/ppy/osu-framework.wiki/blob/master/Setting-up-compiled-resource-stores.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          osu!framework is licensed under the MIT licence, docs powered by docfx
        </div>
      </div>
    </footer>
  </body>
</html>
